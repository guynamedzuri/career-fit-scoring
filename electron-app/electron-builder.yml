appId: com.career-fit-scoring.app
productName: 이력서 적합도 평가 시스템
copyright: Copyright © 2025

# 파일 크기 최적화
asar: true  # asar 아카이브 사용 (기본값이지만 명시)
compression: maximum  # 최대 압축
# electron-updater는 asar 외부에 있어야 함 (네이티브 모듈 의존성)
# asarUnpack은 프로젝트 루트 기준 상대 경로 (electron-app 폴더 기준)
# 중요: asarUnpack이 작동하려면 해당 파일이 files에 먼저 포함되어야 함
asarUnpack:
  - "**/node_modules/electron-updater/**/*"
  - "**/node_modules/builder-util-runtime/**/*"
  - "**/node_modules/fs-extra/**/*"
  - "**/node_modules/jsonfile/**/*"
  - "**/node_modules/semver/**/*"
  - "**/node_modules/universalify/**/*"

# 자동 업데이트 설정 (GitHub Releases 사용)
publish:
  provider: github
  owner: guynamedzuri  # GitHub 사용자명 또는 조직명
  repo: career-fit-scoring  # 저장소 이름
  # latest.yml 파일 생성을 위해 publish 설정 필요
  # 실제로 publish하지 않아도 latest.yml은 생성됨
  # electron-updater가 런타임에 이 설정을 읽어서 사용함

directories:
  output: dist-installer
  buildResources: build

files:
  # 필수 파일들
  - electron/**/*
  - dist/**/*
  - package.json
  - "../.env"
  # electron-updater와 의존성은 반드시 포함되어야 하며, asarUnpack으로 unpack됨
  # 중요: files에 포함되어야 asarUnpack이 작동함
  - "node_modules/electron-updater/**/*"
  - "node_modules/builder-util-runtime/**/*"
  - "node_modules/fs-extra/**/*"
  - "node_modules/jsonfile/**/*"
  - "node_modules/semver/**/*"
  - "node_modules/universalify/**/*"
  # 다른 필요한 node_modules (career-fit-scoring 등)
  - "node_modules/career-fit-scoring/**/*"
  - "node_modules/lucide-react/**/*"
  - "node_modules/react/**/*"
  - "node_modules/react-dom/**/*"
  # 나머지 필요한 node_modules도 포함 (빌드 실패 방지)
  - "node_modules/**/*"
  # 개발 도구 설정 파일 제외 (중요!)
  - "!**/.vscode/**/*"
  - "!**/.idea/**/*"
  - "!**/.vs/**/*"
  - "!**/.editorconfig"
  - "!**/.eslintrc*"
  - "!**/.prettierrc*"
  - "!**/.gitignore"
  - "!**/.gitattributes"
  # TypeScript 설정 파일 제외
  - "!**/tsconfig*.json"
  - "!**/tsconfig*.ts"
  # career-fit-scoring 패키지의 빌드 결과물 제외 (중요!)
  - "!**/node_modules/career-fit-scoring/dist/**/*"
  - "!**/node_modules/career-fit-scoring/dist-installer/**/*"
  - "!**/node_modules/career-fit-scoring/electron-app/**/*"
  - "!**/node_modules/career-fit-scoring/.git/**/*"
  - "!**/node_modules/career-fit-scoring/node_modules/**/*"
  # node_modules 최적화 - 불필요한 파일 제외
  # electron-updater는 제외하지 않음 (자동 업데이트에 필수)
  # electron-updater를 제외하는 규칙들 (다른 패키지에만 적용)
  - "!**/node_modules/!(electron-updater)/*/{CHANGELOG.md,README.md,README,readme.md,readme,LICENSE,LICENSE.txt,license.txt}"
  - "!**/node_modules/!(electron-updater)/*/{test,__tests__,tests,powered-test,example,examples,docs,documentation}"
  - "!**/node_modules/!(electron-updater)/*.d.ts"
  - "!**/node_modules/.bin"
  - "!**/node_modules/!(electron-updater)/*/{.github,.nyc_output,coverage}"
  - "!**/node_modules/!(electron-updater)/*/{*.map,*.md,*.txt,*.log}"
  # 소스맵 제외
  - "!**/*.map"
  # TypeScript 소스 파일 제외 (이미 컴파일됨)
  - "!**/*.ts"
  - "!**/*.tsx"
  # 기타 불필요한 파일
  - "!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}"
  - "!**/._*"
  - "!**/{.DS_Store,.git,.hg,.svn,CVS,RCS,SCCS}"
  - "!**/{__pycache__,thumbs.db,.flowconfig,.nyc_output}"
  - "!**/{appveyor.yml,.travis.yml,circle.yml}"
  - "!**/{npm-debug.log,yarn.lock,.yarn-integrity,.yarn-metadata.json}"
  # 빌드 관련 파일 제외
  - "!**/vite.config.*"
  - "!**/webpack.config.*"
  - "!**/rollup.config.*"

win:
  target:
    - target: nsis
      arch:
        - x64
  # icon 설정 제거 (기본 아이콘 사용)
  # icon: build/icon.ico
  requestedExecutionLevel: asInvoker
  # 코드 서명 비활성화 (인증서 비용 절감)
  sign: null
  signAndEditExecutable: false
  # winCodeSign 다운로드 비활성화
  signingHashAlgorithms: []

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: 이력서 적합도 평가 시스템
  # icon 설정 제거 (기본 아이콘 사용)
  # installerIcon: build/icon.ico
  # uninstallerIcon: build/icon.ico
  # installerHeaderIcon: build/icon.ico
  deleteAppDataOnUninstall: false

mac:
  target:
    - target: dmg
      arch:
        - x64
        - arm64
  category: public.app-category.business
  # icon 설정 제거 (기본 아이콘 사용)
  # icon: build/icon.icns

linux:
  target:
    - target: AppImage
      arch:
        - x64
  category: Utility
